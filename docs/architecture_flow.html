<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure AI QA Agent - Technical Architecture Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Inter:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .code-font {
            font-family: 'JetBrains Mono', monospace;
        }

        .flow-step {
            transition: all 0.3s ease;
        }

        .flow-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(6, 182, 212, 0.3);
        }

        .arrow {
            position: relative;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .arrow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, #06b6d4, #8b5cf6);
        }

        .arrow::after {
            content: '‚ñº';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            color: #8b5cf6;
            font-size: 20px;
        }

        .payload-box {
            background: rgba(15, 23, 42, 0.8);
            border-left: 3px solid #06b6d4;
        }

        .component-badge {
            background: linear-gradient(135deg, #06b6d4, #8b5cf6);
        }

        .data-flow {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
    </style>
</head>

<body class="text-gray-100 p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1
                class="text-5xl font-bold mb-4 bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
                Secure AI QA Agent
            </h1>
            <h2 class="text-2xl font-semibold text-gray-300 mb-2">Technical Architecture & Data Flow</h2>
            <p class="text-gray-400 max-w-3xl mx-auto">
                End-to-end communication flow from browser click to test case generation
            </p>
        </div>

        <!-- Flow Steps -->
        <div class="space-y-6">

            <!-- Step 1: Frontend Button Click -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 1
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Frontend: User Clicks "Launch Explorer Agent"
                        </h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">templates/index.html</code>
                            (Line 267)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">JavaScript Event Handler:</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const payload = {
        suite_name: "Smoke Test A",
        url: "https://saucedemo.com",
        description: "Verify shopping cart flow...",
        username: "standard_user",
        password: "secret_sauce"
    };
    
    const res = await fetch('/api/generate', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
    });
});</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üì° HTTP Request Sent:</p>
                            <p class="text-xs code-font text-gray-300">POST http://127.0.0.1:8000/api/generate</p>
                            <p class="text-xs text-gray-400 mt-2">Content-Type: application/json</p>
                            <details class="mt-2">
                                <summary class="text-xs text-cyan-400 cursor-pointer hover:text-cyan-300">View Full
                                    Payload</summary>
                                <pre class="code-font text-xs text-gray-300 mt-2 bg-slate-900 p-2 rounded">{
  "suite_name": "Smoke Test A",
  "url": "https://saucedemo.com",
  "description": "Verify the shopping cart flow: Add an item and proceed to checkout",
  "username": "standard_user",
  "password": "secret_sauce"
}</pre>
                            </details>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 2: FastAPI Server Receives Request -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 2
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Backend: FastAPI Endpoint Receives Request</h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">server.py</code> (Line 71)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">Endpoint Handler:</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">@app.post("/api/generate")
async def generate_tests(req: GenerateRequest):
    logger.info(f"Received request for suite '{req.suite_name}' at {req.url}")
    
    # Initialize Secrets Manager
    secrets = SecretsManager(
        username=os.getenv("APP_USERNAME"),
        password=os.getenv("APP_PASSWORD"),
        login_url=os.getenv("APP_LOGIN_URL")
    )
    
    # Run AI Agent
    raw_result = await explore_and_generate_tests(req.url, req.description, secrets)</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üîê Environment Variables Loaded:</p>
                            <pre class="code-font text-xs text-gray-300">APP_USERNAME    = "standard_user"  (from .env)
APP_PASSWORD    = "secret_sauce"   (from .env)
APP_LOGIN_URL   = "https://saucedemo.com"
GOOGLE_API_KEY  = "AIza..." (masked)
PROVIDER        = "gemini"</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 3: Browser Session Initialization -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 3
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Browser-Use: Initialize Browser Session</h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">explorer_agent.py</code> (Line
                            11)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">Browser Configuration:</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">browser = Browser(browser_profile=BrowserProfile(
    headless=False,  # Visible browser for demo
    args=[
        "--disable-save-password-bubble",
        "--disable-password-manager",
        "--no-default-browser-check",
        "--start-maximized",
        # ... 25+ security flags
    ]
))

await browser.start()  # Launches Chromium via Playwright
page = await browser.new_page()</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üåê Browser Process Started:</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Chromium browser launched (headless=False)</p>
                            <p class="text-xs text-gray-300">‚Ä¢ CDP (Chrome DevTools Protocol) connection established</p>
                            <p class="text-xs text-gray-300">‚Ä¢ New browser context created with security flags</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Empty page ready for navigation</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 4: Secure Credential Injection -->
            <div class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-red-500/20">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-red-600 to-orange-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 4 üîí
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-red-400 mb-2">SECURE ZONE: Credential Injection (Zero-Trust)
                        </h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">secrets_manager.py</code> (Line
                            18)
                        </p>

                        <div class="bg-red-950/30 border border-red-500/30 p-4 rounded-lg mb-4">
                            <p class="text-xs text-red-300 mb-2">‚ö†Ô∏è CRITICAL SECURITY BOUNDARY</p>
                            <p class="text-xs text-gray-300 mb-3">Credentials are injected directly into the browser DOM
                                via Playwright. They NEVER leave the local environment or reach the LLM.</p>

                            <pre class="code-font text-xs text-green-400 overflow-x-auto">async def inject_login(self, page):
    print("üîê SECURE: Navigating to login page...")
    await page.goto(self.login_url)
    await asyncio.sleep(3)
    
    # Direct DOM manipulation - NO AI INVOLVED
    user_selectors = ["input[name='user-name']", "#user-name"]
    for selector in user_selectors:
        elements = await page.get_elements_by_css_selector(selector)
        if elements:
            await elements[0].fill(self.username)  # Direct fill
            break
    
    pass_selectors = ["input[name='password']", "#password"]
    for selector in pass_selectors:
        elements = await page.get_elements_by_css_selector(selector)
        if elements:
            await elements[0].fill(self.password)  # Direct fill
            break
    
    login_btn = await page.get_elements_by_css_selector("#login-button")
    await login_btn[0].click()
    
    print("üîê SECURE: Login complete. Handing over to AI Agent.")</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg border border-green-500/30">
                            <p class="text-sm font-semibold text-green-400 mb-1">‚úÖ Security Guarantee:</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Credentials stored only in .env file (local)</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Playwright fills form fields directly via CDP</p>
                            <p class="text-xs text-gray-300">‚Ä¢ AI agent receives ONLY post-login page state</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Zero credential exposure to cloud LLM</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 5: AI Agent Initialization -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 5
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">AI Agent: Initialize with Task Prompt</h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">explorer_agent.py</code> (Line
                            43)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">Agent Task Prompt (sent to LLM):</p>
                            <pre class="code-font text-xs text-yellow-400 overflow-x-auto">exploration_task = """
CRITICAL: You MUST respond ONLY with valid JSON. No explanatory text.

Your task: Verify the shopping cart flow: Add an item and proceed to checkout

Instructions:
1. I have ALREADY logged you in. DO NOT try to login again.
2. Navigate through the UI to understand the flow.
3. DO NOT log out.
4. Identify specific element IDs and CSS selectors.
5. Your FINAL output must be EXACTLY in this format:

{"test_cases": [{"id": "TC001", "title": "Test Title", "steps": ["Step 1", "Step 2"]}]}

REMEMBER: Output MUST be pure JSON. No "Here is the JSON:" text.
"""

agent = Agent(
    task=exploration_task,
    llm=llm,  # Gemini/OpenAI/Anthropic
    browser=browser  # Browser session with logged-in state
)</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">ü§ñ Agent Configuration:</p>
                            <p class="text-xs text-gray-300">‚Ä¢ LLM Provider: Gemini (gemini-flash-latest)</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Browser: Chromium (logged-in state)</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Task: Extract test cases from UI exploration</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 6: Agent Exploration Loop -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-purple-500/20">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 6
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-purple-400 mb-2">AI Agent: Browser Exploration Loop</h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">browser-use library</code>
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">Agent Execution Flow:</p>
                            <pre class="code-font text-xs text-cyan-400 overflow-x-auto">history = await agent.run()

# Internal Loop (happens automatically):
while not task_complete:
    # 1. Capture Page State
    screenshot = await page.screenshot()
    dom_state = await page.evaluate('document.body.innerHTML')
    
    # 2. Send to LLM
    llm_input = {
        "screenshot": base64_encode(screenshot),
        "dom": sanitized_dom,  # NO CREDENTIALS IN DOM
        "task": exploration_task,
        "memory": previous_actions
    }
    
    # 3. LLM Decides Next Action
    llm_response = await llm.ainvoke(llm_input)
    action = parse_action(llm_response)  # e.g., click, scroll, extract
    
    # 4. Execute Action
    if action.type == "click":
        await page.click(action.selector)
    elif action.type == "done":
        final_result = action.output
        break
    
    # 5. Update Memory
    memory.append({"action": action, "result": page_state})</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üîÑ Data Flowing to LLM (Gemini API):
                            </p>
                            <details class="mt-2">
                                <summary class="text-xs text-cyan-400 cursor-pointer">View Example LLM Request Payload
                                </summary>
                                <pre class="code-font text-xs text-gray-300 mt-2 bg-slate-900 p-2 rounded">{
  "model": "gemini-flash-latest",
  "messages": [
    {
      "role": "system",
      "content": "You are a QA automation expert..."
    },
    {
      "role": "user",
      "content": "Task: Verify shopping cart flow\n\nCurrent page screenshot: [base64 image]\n\nDOM elements visible:\n- button#add-to-cart-sauce-labs-backpack\n- a.shopping_cart_link\n- div.inventory_item\n\nWhat is your next action?"
    }
  ]
}</pre>
                            </details>
                            <p class="text-xs text-gray-400 mt-2">‚ö†Ô∏è Note: Screenshots and DOM sent to cloud, but NO
                                credentials (already logged in)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 7: LLM Response Processing -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 7
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Agent: Parse LLM Response & Generate Test Cases
                        </h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">explorer_agent.py</code> (Line
                            64)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">LLM Final Response (JSON):</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">{
  "test_cases": [
    {
      "id": "TC001",
      "title": "Verify successful shopping cart flow and order completion",
      "steps": [
        "Click 'Add to cart' button for 'Sauce Labs Backpack' (ID: add-to-cart-sauce-labs-backpack)",
        "Click shopping cart icon (CSS: #shopping_cart_container a)",
        "Click 'Checkout' button (ID: checkout)",
        "Input 'John' into First Name field (ID: first-name)",
        "Input 'Doe' into Last Name field (ID: last-name)",
        "Input '12345' into Zip/Postal Code field (ID: postal-code)",
        "Click 'Continue' button (ID: continue)",
        "Click 'Finish' button (ID: finish)"
      ]
    }
  ]
}

# Python Code:
history = await agent.run()
final_result = history.final_result()  # Returns JSON string above
await browser.stop()
return final_result</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üìä Agent Execution Summary:</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Total browser actions: ~8-12 (clicks, navigations)</p>
                            <p class="text-xs text-gray-300">‚Ä¢ LLM API calls: ~8-10 (one per action)</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Execution time: ~20-30 seconds</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Test cases generated: 1</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 8: Playwright Script Generation -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 8
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Backend: Generate Executable Playwright Scripts
                        </h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">playwright_generator.py</code>
                            (Line 20)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">Script Generation Process:</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">generator = PlaywrightGenerator()

for test_case in test_cases:
    script_path = generator.generate_script(
        test_case=test_case,
        suite_name="Smoke Test A",
        credentials={
            "url": "https://saucedemo.com",
            "username": "standard_user",
            "password": "secret_sauce"
        }
    )
    # Generates: generated_tests/Smoke_Test_A_TC001_verify_cart.py

# Script Content (auto-generated):
"""
async def test_tc001():
    async with async_playwright() as p:
        browser = await p.chromium.launch(headless=False)
        page = await browser.new_page()
        
        # Login
        await page.goto("https://saucedemo.com")
        await page.fill("#user-name", "standard_user")
        await page.fill("#password", "secret_sauce")
        await page.click("#login-button")
        
        # Test steps (from AI-generated test case)
        await page.click("#add-to-cart-sauce-labs-backpack")
        await page.click("#shopping_cart_container a")
        # ... all 8 steps
        
        print("Test PASSED ‚úì")
        return "PASS"
"""</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üíæ Files Created:</p>
                            <p class="text-xs code-font text-gray-300">generated_tests/Smoke_Test_A_TC001_verify_cart.py
                            </p>
                            <p class="text-xs code-font text-gray-300">generated_tests/Smoke_Test_A_metadata.json</p>
                            <p class="text-xs code-font text-gray-300">test_suites.json (persisted in-memory data)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 9: Response to Frontend -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20">
                <div class="flex items-start gap-4">
                    <div class="component-badge text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 9
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Backend: Send Response to Frontend</h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">server.py</code> (Line 149)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">HTTP Response Payload:</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">return {
    "status": "success",
    "test_cases": [
        {
            "id": "TC001",
            "title": "Verify successful shopping cart flow and order completion",
            "steps": [
                "Click 'Add to cart' button for 'Sauce Labs Backpack' (ID: add-to-cart-sauce-labs-backpack)",
                "Click shopping cart icon (CSS: #shopping_cart_container a)",
                "Click 'Checkout' button (ID: checkout)",
                "Input 'John' into First Name field (ID: first-name)",
                "Input 'Doe' into Last Name field (ID: last-name)",
                "Input '12345' into Zip/Postal Code field (ID: postal-code)",
                "Click 'Continue' button (ID: continue)",
                "Click 'Finish' button (ID: finish)"
            ]
        }
    ],
    "scripts_generated": 1
}</pre>
                        </div>

                        <div class="data-flow p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400 mb-1">üì° HTTP Response:</p>
                            <p class="text-xs text-gray-300">HTTP/1.1 200 OK</p>
                            <p class="text-xs text-gray-300">Content-Type: application/json</p>
                            <p class="text-xs text-gray-300">Response Size: ~500 bytes</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 10: Frontend Display -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-green-500/20">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 10 ‚úì
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-green-400 mb-2">Frontend: Display Test Cases to User</h3>
                        <p class="text-gray-300 mb-4">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">templates/index.html</code>
                            (Line 319)
                        </p>

                        <div class="payload-box p-4 rounded-lg mb-4">
                            <p class="text-xs text-gray-400 mb-2">JavaScript Response Handler:</p>
                            <pre class="code-font text-xs text-green-400 overflow-x-auto">const data = await res.json();

if (data.status === 'success') {
    renderTable(data.test_cases);
    tableContainer.classList.remove('hidden');
}

function renderTable(cases) {
    cases.forEach(tc => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${tc.id}</td>
            <td>
                <div>${tc.title}</div>
                <div>${tc.steps.map(s => `<li>${s}</li>`).join('')}</div>
            </td>
            <td><button onclick="runTest('${tc.id}')">Run Test</button></td>
        `;
        tbody.appendChild(row);
    });
}</pre>
                        </div>

                        <div class="bg-green-950/30 border border-green-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-green-400 mb-1">‚úÖ Cycle Complete!</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Test case appears in UI table</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Playwright script ready in filesystem</p>
                            <p class="text-xs text-gray-300">‚Ä¢ Suite data persisted to test_suites.json</p>
                            <p class="text-xs text-gray-300">‚Ä¢ User can click "Run Test" to execute generated script</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Architecture Summary -->
        <div class="mt-12 bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-8 border border-cyan-500/20">
            <h2 class="text-2xl font-bold text-cyan-400 mb-6">Architecture Summary</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-slate-900 p-4 rounded-lg border border-purple-500/20">
                    <h3 class="text-lg font-semibold text-purple-400 mb-3">üîß Technology Stack</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><strong>Frontend:</strong> HTML, TailwindCSS, Vanilla JavaScript</li>
                        <li><strong>Backend:</strong> FastAPI (Python 3.12)</li>
                        <li><strong>Browser Automation:</strong> browser-use (Playwright wrapper)</li>
                        <li><strong>AI/LLM:</strong> Gemini Flash, OpenAI, Anthropic</li>
                        <li><strong>Test Generation:</strong> Custom Playwright script generator</li>
                        <li><strong>Storage:</strong> JSON files (test_suites.json, metadata)</li>
                    </ul>
                </div>

                <div class="bg-slate-900 p-4 rounded-lg border border-red-500/20">
                    <h3 class="text-lg font-semibold text-red-400 mb-3">üîê Security Architecture</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><strong>Zero-Trust Model:</strong> Credentials never sent to LLM</li>
                        <li><strong>Local Injection:</strong> Playwright fills forms directly via CDP</li>
                        <li><strong>Environment Isolation:</strong> .env file for secrets</li>
                        <li><strong>Post-Auth State:</strong> AI only sees logged-in pages</li>
                        <li><strong>No Cloud Storage:</strong> All data stored locally</li>
                    </ul>
                </div>

                <div class="bg-slate-900 p-4 rounded-lg border border-cyan-500/20">
                    <h3 class="text-lg font-semibold text-cyan-400 mb-3">üìä Data Flow Summary</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><strong>Frontend ‚Üí Backend:</strong> JSON payload (suite config)</li>
                        <li><strong>Backend ‚Üí Browser:</strong> Playwright CDP commands</li>
                        <li><strong>Browser ‚Üí LLM:</strong> Screenshots + sanitized DOM</li>
                        <li><strong>LLM ‚Üí Backend:</strong> Test case JSON</li>
                        <li><strong>Backend ‚Üí Filesystem:</strong> Playwright .py scripts</li>
                        <li><strong>Backend ‚Üí Frontend:</strong> Test case JSON response</li>
                    </ul>
                </div>

                <div class="bg-slate-900 p-4 rounded-lg border border-green-500/20">
                    <h3 class="text-lg font-semibold text-green-400 mb-3">‚ö° Performance Metrics</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><strong>Total Time:</strong> ~25-35 seconds (exploration)</li>
                        <li><strong>LLM API Calls:</strong> 8-12 per exploration</li>
                        <li><strong>Browser Actions:</strong> 10-15 automated actions</li>
                        <li><strong>Script Generation:</strong>
                            <1 second per test case</li>
                        <li><strong>Test Execution:</strong> ~10-15 seconds (Playwright)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-gray-500 text-sm">
            <p>Secure AI QA Agent - Technical Architecture Documentation</p>
            <p class="mt-1">Generated: 2025-11-29 | Version: 1.0</p>
        </div>
    </div>
</body>

</html>