<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Testing Agent - End-to-End Flows</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Inter:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .code-font {
            font-family: 'JetBrains Mono', monospace;
        }

        .flow-step {
            transition: all 0.3s ease;
        }

        .flow-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(6, 182, 212, 0.3);
        }

        .arrow {
            position: relative;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .arrow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, #06b6d4, #8b5cf6);
        }

        .arrow::after {
            content: '‚ñº';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            color: #8b5cf6;
            font-size: 20px;
        }

        .section-divider {
            background: linear-gradient(90deg, transparent, #06b6d4, transparent);
            height: 2px;
            margin: 3rem 0;
        }

        .badge {
            background: linear-gradient(135deg, #06b6d4, #8b5cf6);
        }

        .data-box {
            background: rgba(15, 23, 42, 0.8);
            border-left: 3px solid #06b6d4;
        }
    </style>
</head>

<body class="text-gray-100 p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1
                class="text-5xl font-bold mb-4 bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
                End-to-End Flows
            </h1>
            <h2 class="text-2xl font-semibold text-gray-300 mb-2">AI-Powered Testing Agent</h2>
            <p class="text-gray-400 max-w-3xl mx-auto">
                Complete technical breakdown of test generation and execution workflows
            </p>
        </div>

        <!-- Navigation -->
        <div class="flex gap-4 justify-center mb-12">
            <a href="#flow1" class="bg-cyan-600 hover:bg-cyan-500 px-6 py-3 rounded-lg font-semibold transition-colors">
                üîç Flow 1: Generate Tests
            </a>
            <a href="#flow2"
                class="bg-purple-600 hover:bg-purple-500 px-6 py-3 rounded-lg font-semibold transition-colors">
                ‚ñ∂Ô∏è Flow 2: Execute Tests
            </a>
        </div>

        <!-- ==================== FLOW 1: GENERATE TESTS ==================== -->
        <div id="flow1" class="mb-16">
            <div class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-8 mb-8 border border-cyan-500/30">
                <h2 class="text-3xl font-bold text-cyan-400 mb-4">Flow 1: Launch Explorer Agent ‚Üí Generate Test Cases
                </h2>
                <p class="text-gray-300">User clicks "Launch Explorer Agent" ‚Üí AI explores the application ‚Üí Test cases
                    and Playwright scripts generated</p>
            </div>

            <!-- Step 1: User Clicks Button -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 1</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">User: Click "Launch Explorer Agent"</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">templates/index.html</code>
                            (Line 272)</p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">User provides:</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ Suite Name: "Smoke Test A"</li>
                                <li>‚Ä¢ URL: "https://saucedemo.com"</li>
                                <li>‚Ä¢ Goal: "Verify shopping cart flow"</li>
                                <li>‚Ä¢ Credentials: (stored in .env)</li>
                            </ul>
                        </div>

                        <div class="bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400">üì° HTTP Request:</p>
                            <p class="text-xs code-font text-gray-300">POST http://localhost:8000/api/generate</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 2: Server Receives -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 2</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Server: FastAPI Endpoint</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/core/server.py</code> (Line
                            77)</p>

                        <div class="data-box p-4 rounded-lg">
                            <p class="text-xs text-gray-400 mb-2">Actions:</p>
                            <pre class="code-font text-xs text-green-400">‚Ä¢ Initialize SecretsManager with .env credentials
‚Ä¢ Call explore_and_generate_tests()
‚Ä¢ Pass URL, goal, and secrets_manager</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 3: Browser Init -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 3</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Explorer Agent: Initialize Browser</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/agents/explorer_agent.py</code>
                            (Line 18)</p>

                        <div class="data-box p-4 rounded-lg">
                            <p class="text-xs text-gray-400 mb-2">Browser Configuration:</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ <strong>headless:</strong> False (visible browser)</li>
                                <li>‚Ä¢ <strong>wait_between_actions:</strong> 3.0 seconds</li>
                                <li>‚Ä¢ <strong>highlight_elements:</strong> True (yellow highlights)</li>
                                <li>‚Ä¢ <strong>args:</strong> 35+ security flags</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 3a: Session Cache Check (NEW) -->
            <div
                class="flow-step bg-gradient-to-r from-emerald-900 to-slate-800 rounded-xl p-6 border border-emerald-500/30 mb-6">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-emerald-600 to-green-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 3a ‚ö°</div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <h3 class="text-xl font-bold text-emerald-400">Session Cache Check</h3>
                            <span
                                class="bg-emerald-500/20 text-emerald-300 text-xs px-2 py-1 rounded-full font-semibold">üÜï
                                NEW OPTIMIZATION</span>
                        </div>
                        <p class="text-gray-300 mb-3">
                            <strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/core/secrets_manager.py</code>
                            (Line 111)
                            <br><strong>Performance:</strong> <span class="text-emerald-400 font-bold">‚ö° 94% faster
                                login</span> (8-10s ‚Üí 0.5s)
                        </p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">Cache Decision Logic:</p>
                            <pre class="code-font text-xs text-green-400">session_loaded = await secrets_manager.try_load_cached_session(page)

if session_loaded:
    # ‚úÖ Cache HIT - skip login
    print("‚ö° Saved ~5-10 seconds!")
else:
    # ‚ùå Cache MISS - proceed to Step 4
    await secrets_manager.inject_login(page)</pre>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-red-950/30 border border-red-500/30 p-3 rounded-lg">
                                <p class="text-xs font-semibold text-red-400 mb-1">‚ùå Before (Every Run)</p>
                                <p class="text-xs text-gray-300">Full login required</p>
                                <p class="text-xs text-red-400 font-bold mt-1">‚è±Ô∏è 8-10 seconds</p>
                            </div>
                            <div class="bg-emerald-950/30 border border-emerald-500/30 p-3 rounded-lg">
                                <p class="text-xs font-semibold text-emerald-400 mb-1">‚úÖ After (From 2nd Run)</p>
                                <p class="text-xs text-gray-300">Load & validate cookies</p>
                                <p class="text-xs text-emerald-400 font-bold mt-1">‚è±Ô∏è 0.5 seconds ‚ö°</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 4: Credential Injection (Fallback Path) -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-red-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-red-600 to-orange-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 4 üîí</div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <h3 class="text-xl font-bold text-red-400">SECURE: Credential Injection (Fresh Login)</h3>
                            <span class="bg-orange-500/20 text-orange-300 text-xs px-2 py-1 rounded-full">Fallback when
                                no cache</span>
                        </div>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/core/secrets_manager.py</code>
                            (Line 11)</p>

                        <div class="bg-red-950/30 border border-red-500/30 p-4 rounded-lg mb-3">
                            <p class="text-xs text-red-300 mb-2">üîê ZERO-TRUST BOUNDARY</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>1. Navigate to login URL</li>
                                <li>2. Fill username (direct DOM manipulation)</li>
                                <li>3. Fill password (direct DOM manipulation)</li>
                                <li>4. Click login button</li>
                                <li>5. Press ESC to dismiss browser alerts</li>
                            </ul>
                        </div>

                        <div class="bg-green-900/20 border border-green-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-green-400">‚úÖ Security Guarantee:</p>
                            <p class="text-xs text-gray-300">Credentials NEVER sent to LLM. AI only sees post-login
                                state.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 5: LLM Initialization -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 5</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">LLM: Initialize AI Agent</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/llm/llm_factory.py</code>
                        </p>

                        <div class="data-box p-4 rounded-lg">
                            <p class="text-xs text-gray-400 mb-2">LLM Configuration:</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ Provider: Gemini/OpenAI/Anthropic (from .env)</li>
                                <li>‚Ä¢ Temperature: 0 (deterministic)</li>
                                <li>‚Ä¢ Task: Exploration goal + JSON output format</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 6: Agent Exploration -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-purple-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 6</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-purple-400 mb-2">AI Loop: Browser Exploration</h3>
                        <p class="text-gray-300 mb-3"><strong>Duration:</strong> 25-35 seconds | <strong>API
                                Calls:</strong> 8-12</p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">Iteration Loop (browser-use library):</p>
                            <pre class="code-font text-xs text-cyan-400">while not task_complete:
    1. Capture screenshot + DOM
    2. Send to LLM: "What should I do next?"
    3. LLM responds: "Click element X"
    4. Execute browser action via Playwright
    5. Wait 3 seconds (visible delay)
    6. Update memory with action result</pre>
                        </div>

                        <div class="bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400">üîÑ Example Actions:</p>
                            <p class="text-xs text-gray-300">Click "Add to cart" ‚Üí Click cart icon ‚Üí Click "Checkout" ‚Üí
                                Fill form ‚Üí Click "Finish"</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 7: Generate Test Cases -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 7</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">LLM: Generate Test Cases JSON</h3>
                        <p class="text-gray-300 mb-3">AI returns structured JSON with test steps and selectors</p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">Example Output:</p>
                            <pre class="code-font text-xs text-green-400">{
  "test_cases": [{
    "id": "TC001",
    "title": "Shopping cart checkout",
    "steps": [
      "Click 'Add to cart' using: button[data-test='add-to-cart']",
      "Click cart icon using: .shopping_cart_link",
      "Click 'Checkout' using: button[data-test='checkout']"
    ]
  }]
}</pre>
                        </div>

                        <div class="bg-yellow-900/20 border border-yellow-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-yellow-400">‚ö° Multi-Method JSON Parsing:</p>
                            <p class="text-xs text-gray-300">Server tries 3 parsing methods to handle LLM variability
                                (direct, markdown, regex+repair)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 8: Generate Playwright Scripts -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 8</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Server: Generate Playwright Scripts</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/generators/playwright_generator.py</code>
                        </p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">For each test case:</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>1. Extract selectors from step descriptions</li>
                                <li>2. Generate Python Playwright code</li>
                                <li>3. Include login logic (with credentials)</li>
                                <li>4. Save to: <code
                                        class="code-font text-xs">data/generated_tests/{suite}_{id}.py</code></li>
                            </ul>
                        </div>

                        <div class="bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400">üíæ Files Created:</p>
                            <p class="text-xs code-font text-gray-300">data/generated_tests/Smoke_Test_A_TC001.py</p>
                            <p class="text-xs code-font text-gray-300">data/test_suites.json (persisted)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 9: Return Response -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-green-500/20">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 9 ‚úì</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-green-400 mb-2">Complete: Display Test Cases</h3>
                        <p class="text-gray-300 mb-3">Server sends test cases to frontend ‚Üí User sees results in table
                        </p>

                        <div class="bg-green-950/30 border border-green-500/30 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-green-400 mb-2">‚úÖ Flow 1 Complete!</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ Test cases displayed in UI table</li>
                                <li>‚Ä¢ Playwright scripts ready in filesystem</li>
                                <li>‚Ä¢ Suite data persisted to JSON</li>
                                <li>‚Ä¢ User can now click "Run Test"</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Divider -->
        <div class="section-divider"></div>

        <!-- ==================== FLOW 2: EXECUTE TESTS ==================== -->
        <div id="flow2">
            <div class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-8 mb-8 border border-purple-500/30">
                <h2 class="text-3xl font-bold text-purple-400 mb-4">Flow 2: Run Test ‚Üí Execute & Display Results</h2>
                <p class="text-gray-300">User clicks "Run Test" ‚Üí Playwright script executes ‚Üí Results displayed</p>
            </div>

            <!-- Step 1: User Click -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-purple-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 1</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-purple-400 mb-2">User: Click "Run Test" Button</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">templates/index.html</code>
                            (runTest function)</p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">User Action:</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ Clicks "Run Test" for specific test case (e.g., TC001)</li>
                                <li>‚Ä¢ Status badge changes to "Running..." (yellow, spinning)</li>
                            </ul>
                        </div>

                        <div class="bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-purple-400">üì° HTTP Request:</p>
                            <p class="text-xs code-font text-gray-300">POST http://localhost:8000/api/execute</p>
                            <p class="text-xs code-font text-gray-300">Body: {suite_name: "Smoke Test A", test_case_id:
                                "TC001"}</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 2: Server Validates -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-purple-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 2</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-purple-400 mb-2">Server: Validate & Find Script</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/core/server.py</code> (Line
                            237)</p>

                        <div class="data-box p-4 rounded-lg">
                            <p class="text-xs text-gray-400 mb-2">Validation Steps:</p>
                            <pre class="code-font text-xs text-green-400">1. Retrieve suite from TEST_SUITES dict
2. Find test case by ID
3. Search for Playwright script:
   data/generated_tests/{suite}_{id}_*.py</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 3: Execute Script -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-cyan-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 3</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-cyan-400 mb-2">Execute: Run Playwright Script</h3>
                        <p class="text-gray-300 mb-3"><strong>Method:</strong> subprocess.run(['python', script_path])
                        </p>

                        <div class="data-box p-4 rounded-lg mb-3">
                            <p class="text-xs text-gray-400 mb-2">Script Execution:</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>1. Launch new Chromium browser</li>
                                <li>2. Navigate to login page</li>
                                <li>3. Fill credentials and login</li>
                                <li>4. Execute each test step sequentially</li>
                                <li>5. Verify success conditions</li>
                                <li>6. Print "PASS" or "FAIL"</li>
                                <li>7. Close browser</li>
                            </ul>
                        </div>

                        <div class="bg-cyan-900/20 border border-cyan-500/30 p-3 rounded-lg">
                            <p class="text-sm font-semibold text-cyan-400">‚è±Ô∏è Duration:</p>
                            <p class="text-xs text-gray-300">~10-15 seconds (faster than AI re-execution)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 4: Process Result -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-purple-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div class="badge text-white px-4 py-2 rounded-lg font-semibold text-sm">STEP 4</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-purple-400 mb-2">Server: Parse Execution Result</h3>
                        <p class="text-gray-300 mb-3">Check subprocess output for "PASS"/"FAIL" string</p>

                        <div class="data-box p-4 rounded-lg">
                            <p class="text-xs text-gray-400 mb-2">Result Detection Logic:</p>
                            <pre class="code-font text-xs text-green-400">if "PASS" in stdout or returncode == 0:
    result = "PASS"
else:
    result = "FAIL"</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 5: Fallback Path (if needed) -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-yellow-500/20 mb-6">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-yellow-600 to-orange-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        ALT PATH</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-yellow-400 mb-2">Fallback: AI Re-Execution (if script not
                            found)</h3>
                        <p class="text-gray-300 mb-3"><strong>Location:</strong> <code
                                class="code-font text-sm bg-slate-700 px-2 py-1 rounded">src/agents/test_executor.py</code>
                        </p>

                        <div class="bg-yellow-950/30 border border-yellow-500/30 p-4 rounded-lg">
                            <p class="text-xs text-yellow-300 mb-2">‚ö†Ô∏è Slower Alternative Path</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>1. Re-initialize browser + LLM</li>
                                <li>2. Re-inject credentials via SecretsManager</li>
                                <li>3. Ask AI to execute test steps</li>
                                <li>4. Return "PASS" or "FAIL"</li>
                            </ul>
                            <p class="text-xs text-gray-400 mt-2">Duration: ~20-30 seconds (vs 10-15 for script)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow"></div>

            <!-- Step 6: Return Result -->
            <div
                class="flow-step bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-green-500/20">
                <div class="flex items-start gap-4">
                    <div
                        class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                        STEP 6 ‚úì</div>
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-green-400 mb-2">Complete: Display Result</h3>
                        <p class="text-gray-300 mb-3">Server sends result ‚Üí Frontend updates badge</p>

                        <div class="bg-green-950/30 border border-green-500/30 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-green-400 mb-2">‚úÖ Flow 2 Complete!</p>
                            <ul class="text-sm text-gray-300 space-y-1">
                                <li>‚Ä¢ <strong>PASS:</strong> Badge turns green ‚úì</li>
                                <li>‚Ä¢ <strong>FAIL:</strong> Badge turns red ‚úó</li>
                                <li>‚Ä¢ <strong>TIMEOUT:</strong> Badge shows timeout warning</li>
                                <li>‚Ä¢ User sees immediate visual feedback</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary -->
        <div class="mt-16 bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-8 border border-cyan-500/20">
            <h2 class="text-2xl font-bold text-cyan-400 mb-4">Flow Summary</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold text-purple-400 mb-3">Flow 1: Generation</h3>
                    <ul class="text-sm text-gray-300 space-y-2">
                        <li>‚Ä¢ <strong>Duration:</strong> 25-35 seconds</li>
                        <li>‚Ä¢ <strong>LLM Calls:</strong> 8-12</li>
                        <li>‚Ä¢ <strong>Browser Actions:</strong> 10-15</li>
                        <li>‚Ä¢ <strong>Output:</strong> JSON test cases + Python scripts</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-purple-400 mb-3">Flow 2: Execution</h3>
                    <ul class="text-sm text-gray-300 space-y-2">
                        <li>‚Ä¢ <strong>Duration:</strong> 10-15 seconds (script)</li>
                        <li>‚Ä¢ <strong>Fallback Duration:</strong> 20-30 seconds (AI)</li>
                        <li>‚Ä¢ <strong>Subprocess:</strong> Independent Python process</li>
                        <li>‚Ä¢ <strong>Output:</strong> PASS/FAIL/TIMEOUT/ERROR</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-gray-500 text-sm">
            <p>AI-Powered Testing Agent - End-to-End Flow Documentation</p>
            <p class="mt-1">Created: 2025-11-30</p>
        </div>
    </div>
</body>

</html>